from matplotlib import pyplot
import  csv
valores=[]# aqui estaran todos los valores ordenados por listas.
hogar=[]
region=[]
comuna=[]
persona=[]
edad=[]
parentesco=[]
sexo=[]
cine=[]
proveedor=[]
personas=[]
menores_de_15=[]
mayores_de_15=[]
horas=[]
ingresos=[]
f_pers=[]

b=0
print( "Pregunta 3" )
with open("esi_2017_personas_simplificada.csv", newline="") as File:
    reader=csv.reader(File)
   
    for row in reader:
        titulos=(row)#Todos los titulos que aparecen en el excel
        break
    for row in reader:
        valores.append(row)#para leer valores 
        b=b+1
        if b==20:
            break
        

for i in valores:
    
        

    #hogar.append(float(i[0]))
    #region.append(float(i[1]))
    #comuna.append(float(i[2]))
    #persona.append(float(i[3]))
    edad.append(float(i[4]))
    #parentesco.append(float(i[5]))
    #sexo.append(float(i[6]))
    #cine.append(float(i[7]))
    #proveedor.append(float(i[8]))
    #personas.append(float(i[9]))
    #menores_de_15.append(float(i[10]))
    #mayores_de_15.append(float(i[11]))
    #if i[12]==" ":
      #  horas.append(0)
    #else:
     #   horas.append((float(i[12])))
    ingresos.append(float(i[13]))
    #f_pers.append(float(i[14]))
edadOrden=[]
ingOrden=[]
espIng=[]
espEdad=[]
#a=0

#for i in valores:
    #print(edad[a],"y",ingresos[a])
    #a=a+1
maximo=max(edad)
minimo=min(edad)

while minimo<=maximo:
    esp=0#aqui se sumaran todos los ingresos de esas edad.
    ed=edad.count(minimo)#cantidad de veces que se repite una edad
    ed2=edad.count(minimo)# este valor es el que dividira, para sacar el promedio de los ingresos.
    while ed>0:
        pos=edad.index(minimo)#indica posicion en que se encuentra la primera edad
        edadOrden.append(edad[pos])#se agrega a una lista donde se ordenara en paralelos con los ingresos y de menor a mayor edad 
        edad.pop(pos)#Se elimina el elemento de la lista para no repetirlo
        esp=esp+ingresos[pos]#Aqui se sumaran los ingresos de todas las edades iguales.
        ingOrden.append(ingresos[pos])
        ingresos.pop(pos)
        
        ed=ed-1
    
    if ed2!=0:
        esp2= esp/ed2
    else:
        esp2=0
    print("La esperanza de ingreso de la edad",minimo,"es",esp2)
    espEdad.append(minimo)
    espIng.append(esp2)
    minimo=minimo+1
#print(espEdad)#para hacer graficos
#print(espIng)#Para hacer graficos
pyplot.plot (espEdad)
pyplot.xlabel("Edad de choro")
pyplot.plot(espIng)
pyplot.ylabel("Esperanza de Ingresos")
pyplot.show()













